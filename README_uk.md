# Lecture Cleanup Pipeline (Markdown, без втрати змісту)

Це мінімальний конвеєр для перетворення довгих лекцій (SRT або TXT) на акуратно відформатований Markdown із пунктуацією, збереженням змісту та (за SRT) таймкодами в заголовках. Наприкінці додається підсумок (не авторський).

## Вимоги
- Python 3.9+
- Пакет `openai` (остання версія): `pip install --upgrade openai`
- Змінна середовища `OPENAI_API_KEY`

## Запуск (приклади)
```bash
# SRT-вхід (російська)
python scripts/run_pipeline.py --input path/to/lecture.srt --lang ru --outdir out/lec1

# TXT-вхід (українська)
python scripts/run_pipeline.py --input path/to/lecture.txt --lang uk --outdir out/lec2 --format txt

# Налаштування розміру блоків (SRT): 5 хв + 10 с перекриття
python scripts/run_pipeline.py --input lec.srt --lang en --chunk-seconds 300 --overlap-seconds 10
```

Результат: `out/<назва>/lecture.md` + звіт якості `qc_report.csv`.  
За замовчуванням додається секція `## Підсумок (не авторський)` із маркованими висновками.

## Як це працює
1. Парсер читає SRT або TXT.
2. Розбиває текст на блоки (2–5 хв для SRT або ~6500 символів для TXT) з перекриттям.
3. Кожен блок обробляється через OpenAI за жорстким системним промптом (температура 0).
4. Блоки зливаються в один Markdown; для SRT у заголовки додаються таймкоди блоку.
5. Робиться короткий підсумок (не авторський).
6. Генерується QC-звіт зі «ступенем змін» по кожному блоку, щоб вчасно помічати надмірні правки.

## Параметри
- Мову блоку задаєте прапорцем `--lang` (`ru|uk|en`). Від цього залежить список «слів‑паразитів`.
- Моделі, розміри блоків і пороги контролю змін — у `config.yaml` або у CLI прапорцях.
- Стиль виділення жартів/відступів керується `highlight_asides_style`: `italic` або `blockquote`.

## Поради
- Якщо бачите у `qc_report.csv` високі значення зміни (>0.35), спробуйте зменшити розмір блоку або прибрати пункт 5 у промпті (перестановки слів).
- Глосарій: ви можете передавати список термінів у `--glossary` (звичайний текстовий файл, один термін на рядок).
- Для подальшої інтеграції слайдів див. майбутній модуль `scripts/slides_stub.py` (заготовка).
